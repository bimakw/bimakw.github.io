---
interface Props {
  title: string;
  description?: string;
  image?: string;
  type?: 'website' | 'article';
  publishedTime?: string;
}

const {
  title,
  description = "Bima Kharisma Wicaksana - Technical Lead & Backend Architect with 6+ years experience building scalable systems for 100K+ users.",
  image = "/og-image.png",
  type = "website",
  publishedTime,
} = Astro.props;

const canonicalURL = new URL(Astro.url.pathname, Astro.site);
const imageURL = new URL(image, Astro.site);

// JSON-LD Structured Data
const personSchema = {
  "@context": "https://schema.org",
  "@type": "Person",
  "name": "Bima Kharisma Wicaksana",
  "url": "https://bimakw.github.io",
  "image": imageURL.href,
  "jobTitle": "Technical Lead",
  "worksFor": {
    "@type": "Organization",
    "name": "PT. Indomarco Prismatama (Indomaret Group)"
  },
  "address": {
    "@type": "PostalAddress",
    "addressLocality": "Jakarta",
    "addressCountry": "ID"
  },
  "email": "bimakw20@gmail.com",
  "sameAs": [
    "https://github.com/bimakw",
    "https://www.linkedin.com/in/bima-kharisma-wicaksana-aa3981153/"
  ],
  "knowsAbout": [
    "Go Programming",
    "Rust",
    "TypeScript",
    "Kubernetes",
    "Cloud Architecture",
    "Microservices",
    "System Design",
    "Backend Development"
  ]
};

const websiteSchema = {
  "@context": "https://schema.org",
  "@type": "WebSite",
  "name": "Bima Kharisma Wicaksana",
  "url": "https://bimakw.github.io",
  "description": description,
  "author": {
    "@type": "Person",
    "name": "Bima Kharisma Wicaksana"
  }
};

const breadcrumbSchema = {
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "https://bimakw.github.io"
    }
  ]
};
---

<!-- Primary Meta Tags -->
<meta name="title" content={title} />
<meta name="description" content={description} />
<meta name="author" content="Bima Kharisma Wicaksana" />
<meta name="keywords" content="Bima Kharisma Wicaksana, Technical Lead, Backend Architect, Cloud Engineer, Go Developer, Rust Developer, Kubernetes, GCP, AWS, System Design, Microservices, Jakarta, Indonesia" />
<meta name="robots" content="index, follow" />
<meta name="language" content="English" />
<meta name="revisit-after" content="7 days" />

<!-- Canonical URL -->
<link rel="canonical" href={canonicalURL} />

<!-- Open Graph / Facebook -->
<meta property="og:type" content={type} />
<meta property="og:url" content={canonicalURL} />
<meta property="og:title" content={title} />
<meta property="og:description" content={description} />
<meta property="og:image" content={imageURL} />
<meta property="og:image:alt" content="Bima Kharisma Wicaksana - Portfolio" />
<meta property="og:site_name" content="Bima Kharisma Wicaksana" />
<meta property="og:locale" content="en_US" />
{publishedTime && <meta property="article:published_time" content={publishedTime} />}

<!-- Twitter -->
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:url" content={canonicalURL} />
<meta name="twitter:title" content={title} />
<meta name="twitter:description" content={description} />
<meta name="twitter:image" content={imageURL} />
<meta name="twitter:creator" content="@bimakw" />

<!-- JSON-LD Structured Data -->
<script type="application/ld+json" set:html={JSON.stringify(personSchema)} />
<script type="application/ld+json" set:html={JSON.stringify(websiteSchema)} />
<script type="application/ld+json" set:html={JSON.stringify(breadcrumbSchema)} />
